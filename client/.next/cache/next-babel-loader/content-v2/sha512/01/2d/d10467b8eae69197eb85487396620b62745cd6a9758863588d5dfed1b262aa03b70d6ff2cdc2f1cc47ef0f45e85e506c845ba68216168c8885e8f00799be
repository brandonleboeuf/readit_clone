{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/bleb/DEV/personal/projects for CODE page/readit_clone/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/bleb/DEV/personal/projects for CODE page/readit_clone/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { useRouter } from 'next/router';\nimport Axios from 'axios';\nimport { useAuthState, useAuthDispatch } from '../context/auth';\nimport RedditLogo from '../images/reddit.svg';\n\nvar Navbar = function Navbar() {\n  var _useState = useState(''),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useState2 = useState([]),\n      subs = _useState2[0],\n      setSubs = _useState2[1];\n\n  var _useState3 = useState(null),\n      timer = _useState3[0],\n      setTimer = _useState3[1];\n\n  var _useAuthState = useAuthState(),\n      authenticated = _useAuthState.authenticated,\n      loading = _useAuthState.loading,\n      user = _useAuthState.user;\n\n  var dispatch = useAuthDispatch();\n  var router = useRouter();\n\n  var logout = function logout() {\n    Axios.get('/auth/logout').then(function () {\n      dispatch('LOGOUT');\n      window.location.reload();\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  };\n\n  useEffect(function () {\n    if (name.trim() === '') {\n      setSubs([]);\n      return;\n    }\n\n    searchSubs();\n  }, [name]);\n\n  var searchSubs = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              clearTimeout(timer);\n              setTimer(setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                var _yield$Axios$get, data;\n\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.prev = 0;\n                        _context.next = 3;\n                        return Axios.get(\"/subs/search/\".concat(name));\n\n                      case 3:\n                        _yield$Axios$get = _context.sent;\n                        data = _yield$Axios$get.data;\n                        setSubs(data);\n                        _context.next = 11;\n                        break;\n\n                      case 8:\n                        _context.prev = 8;\n                        _context.t0 = _context[\"catch\"](0);\n                        console.log(_context.t0);\n\n                      case 11:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee, null, [[0, 8]]);\n              })), 250));\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function searchSubs() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var goToSub = function goToSub(subName) {\n    router.push(\"/r/\".concat(subName));\n    setName('');\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"fixed inset-x-0 top-0 z-10 flex items-center justify-between h-12 px-5 bg-white\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"flex items-center\",\n      children: [/*#__PURE__*/_jsx(Link, {\n        href: \"/\",\n        children: /*#__PURE__*/_jsx(\"a\", {\n          children: /*#__PURE__*/_jsx(RedditLogo, {\n            className: \"w-8 h-8 mr-2\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"span\", {\n        className: \"hidden text-2xl font-semibold lg:block\",\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/\",\n          children: \"readit\"\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"max-w-full px-4 w-160\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"relative flex items-center bg-gray-100 border rounded hover:border-blue-500 hover:bg-white\",\n        children: [/*#__PURE__*/_jsx(\"i\", {\n          className: \"pl-4 pr-3 text-gray-500 fas fa-search\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"text\",\n          className: \"py-1 pr-3 bg-transparent rounded focus:outline-none\",\n          placeholder: \"Search\",\n          value: name,\n          onChange: function onChange(e) {\n            return setName(e.target.value);\n          },\n          onBlur: function onBlur() {\n            return setTimeout(function () {\n              return setName('');\n            }, 250);\n          }\n        }), name && /*#__PURE__*/_jsx(\"div\", {\n          className: \"absolute left-0 right-0 bg-white\",\n          style: {\n            top: '100%'\n          },\n          children: subs === null || subs === void 0 ? void 0 : subs.map(function (sub) {\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex items-center px-4 py-3 cursor-pointer hover:bg-gray-200\",\n              onClick: function onClick() {\n                return goToSub(sub.name);\n              },\n              children: [/*#__PURE__*/_jsx(Image, {\n                src: sub.imageUrl,\n                alt: \"Sub\",\n                className: \"rounded-full\",\n                height: 8 * 16 / 4,\n                width: 8 * 16 / 4\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"ml-4 text-sm\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"font-medium\",\n                  children: sub.name\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \"text-gray-600\",\n                  children: sub.title\n                })]\n              })]\n            }, sub.bannerUrl);\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"flex\",\n      children: !loading && (authenticated ?\n      /*#__PURE__*/\n      // Show logout button\n      _jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: \"hidden pt-2 pr-2 text-xs font-semibold lg:block\",\n          children: user.username\n        }), /*#__PURE__*/_jsx(\"button\", {\n          className: \"w-20 py-1 mr-5 leading-5 lg:w-32 hollow blue button\",\n          onClick: logout,\n          children: \"Log Out\"\n        })]\n      }) : /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(Link, {\n          href: \"/login\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            className: \"w-20 py-1 mr-5 leading-5 lg:w-32 hollow blue button\",\n            children: \"log in\"\n          })\n        }), /*#__PURE__*/_jsx(Link, {\n          href: \"/register\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            className: \"w-20 py-1 leading-5 lg:w-32 blue button\",\n            children: \"sign up\"\n          })\n        })]\n      }))\n    })]\n  });\n};\n\nexport default Navbar;","map":null,"metadata":{},"sourceType":"module"}